(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"/U1M":function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.info?a("el-container",{staticClass:"l-h100"},[a("el-header",{staticClass:"l-padding-0",attrs:{height:"auto"}},[a("div",{class:t.stateList[t.info.state].css},[a("i",{class:t.stateList[t.info.state].icon}),t._v(" "+t._s(t.stateList[t.info.state].label)+"\n      "),t.info.state<0?a("span",[t._v("（"+t._s(t.info.reason)+"）")]):t._e(),a("span",{staticClass:"l-margin-l-x2"}),0===t.info.state?a("span",{staticClass:"l-margin-l"},[a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){t.formData.visible=!0}}},[t._v("拒绝通过")]),a("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(i){t.submitConfirm()}}},[t._v("通过申请")])],1):t._e(),10===t.info.state?a("span",{staticClass:"l-margin-l"},[a("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(i){t.sureInsurance()}}},[t._v("确认保险已出")])],1):t._e(),-3!==t.info.state?a("span",{staticClass:"l-margin-l"},[a("el-button",{attrs:{white:"",size:"mini"},nativeOn:{click:function(i){t.closeReason.visible=!0}}},[t._v("关闭订单")])],1):t._e()])]),a("el-main",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{nativeOn:{click:function(i){t.$router.back()}}},[a("b",[t._v("会员分期管理")])]),a("el-breadcrumb-item",[t._v("订单详情")]),a("el-breadcrumb-item",{staticClass:"l-fs-xs"},[a("span",{staticClass:"l-margin-r-x2"},[t._v("订单编号："+t._s(t.info.orderId))]),a("span",{staticClass:"l-margin-r-x2"},[t._v("汽贸店名称："+t._s(t.info.createName))]),a("span",[t._v("渠道商名称："+t._s(t.info.agentName||"无"))])])],1),a("div",{staticClass:"l-margin-t l-zoom"},[a("div",{staticClass:"l-order-info l-margin-r l-fl",staticStyle:{width:"790px"}},[a("div",{staticClass:"l-panel-item"},[a("div",{staticClass:"_hd"},[a("i",{staticClass:"l-txt-gray"},[t._v("保理信息")])]),a("div",{staticClass:"_bd"},[a("div",{staticClass:"l-zoom"},[a("b",{staticClass:"l-minw-33"},[t._v("会费总额："),a("i",{staticClass:"l-rmb l-txt-main"},[t._v(t._s(t._f("Currency")(t.info.amount)))])]),a("p",{staticClass:"l-minw-33"},[t._v("分期期数："+t._s(t.info.period)+"期")]),a("p",{staticClass:"l-minw-33"},[t._v("月利率："+t._s(t.info.rate)+"%")]),a("p",{staticClass:"l-minw-33"},[t._v("每月还款日期："+t._s(t.info.payDate)+"号")]),a("p",{staticClass:"l-minw-33"},[t._v("每期还款金额："),a("i",{staticClass:"l-rmb"},[t._v(t._s(t.info.monthFee))])]),a("p",{staticClass:"l-minw-33"},[t._v("备注："+t._s(t.info.remark))])]),a("div",{staticClass:"l-zoom l-margin-t-m"},[a("div",{staticClass:"l-minw-33"},[a("p",[t._v("贷款合同")]),a("image-previewer",{attrs:{"file-list":t.info.loanContract}})],1),a("div",{staticClass:"l-minw-33"},[a("p",[t._v("划款授权及承诺协议")]),a("image-previewer",{attrs:{"file-list":t.info.protocol}})],1)]),a("div",{staticClass:"l-zoom"},[a("div",{staticClass:"l-minw-33"},[a("p",[t._v("会员服务合同")]),a("image-previewer",{attrs:{"file-list":t.info.serviceContract}})],1),a("div",{staticClass:"l-minw-33"},[a("p",[t._v("会员服务合同发票")]),a("image-previewer",{attrs:{"file-list":t.info.contractTicket}})],1)])])]),a("div",{staticClass:"l-panel-item l-margin-t"},[a("div",{staticClass:"_hd"},[a("i",{staticClass:"l-txt-gray"},[t._v("客户资料")])]),a("div",{staticClass:"_bd"},[a("div",{staticClass:"l-zoom"},[a("b",{staticClass:"l-minw-33"},[t._v("客户姓名："+t._s(t.info.userName))]),a("p",{staticClass:"l-minw-33"},[t._v("客户类型："+t._s(t.info.type))]),a("p",{staticClass:"l-minw-33"},[t._v("手机号码："+t._s(t.info.phone))])]),a("div",{staticClass:"l-zoom l-margin-t-m"},[a("div",{staticClass:"l-minw-33"},[a("p",[t._v("身份证号："),a("i",{staticClass:"l-fs-xs"},[t._v(t._s(t.info.idCard))])]),a("image-previewer",{attrs:{"file-list":[t.info.idCardOn,t.info.idCardOff]}})],1),a("div",{staticClass:"l-minw-33"},[a("p",[t._v("还款卡号："),a("i",{staticClass:"l-fs-xs"},[t._v(t._s(t.info.bankAccount))])]),a("image-previewer",{attrs:{"file-list":[t.info.bankCardOn,t.info.bankCardOff]}})],1),"保有客户"===t.info.type?a("div",{staticClass:"l-minw-33"},[a("p",[t._v("行驶证")]),a("image-previewer",{attrs:{"file-list":t.info.drivingLicense}})],1):t._e()])])]),a("div",{staticClass:"l-panel-item l-margin-t"},[a("div",{staticClass:"_hd"},[a("i",{staticClass:"l-txt-gray"},[t._v("保理车辆信息")])]),a("div",{staticClass:"_bd"},[a("div",{staticClass:"l-zoom"},[a("b",{staticClass:"l-minw-33"},[t._v("车型："+t._s(t.info.carName))])]),a("div",{staticClass:"l-zoom l-margin-t-m"},[a("p",{staticClass:"l-minw-33"},[t._v("车 架 号："+t._s(t.info.frameNumber))]),a("p",{staticClass:"l-minw-33"},[t._v("车身颜色："+t._s(t.info.color))]),a("br"),a("p",{staticClass:"l-minw-33"},[t._v("发动机号："+t._s(t.info.engine))]),a("p",{staticClass:"l-minw-33"},[t._v("车辆合同价："),a("i",{staticClass:"l-rmb"},[t._v(t._s(t.info.purchasePrice))])])]),"新车客户"===t.info.type?a("div",{staticClass:"l-zoom l-margin-t-m"},[a("div",{staticClass:"l-minw-33"},[a("p",[t._v("订车合同")]),a("image-previewer",{attrs:{"file-list":t.info.drivingLicense}})],1)]):t._e()])])]),t.info.state>=10?a("div",{staticClass:"l-order-info l-fl",staticStyle:{width:"450px"},attrs:{response:""}},[50===t.info.state?a("div",{staticClass:"l-repay-now"},[a("div",{staticClass:"_inner l-flex-vhc"},[a("h3",{staticClass:"l-fs-x2"},[a("i",{staticClass:"l-icon l-txt-blue"},[t._v("")]),t._v(" "),a("span",{staticClass:"l-fs-xl"},[t._v("订单已还清")])])])]):t.payToday?a("div",{staticClass:"l-repay-now"},[a("div",{staticClass:"_inner l-flex-hc"},[a("div",{staticClass:"l-rest"},[a("h3",[t._v("今日应还")]),a("p",{staticClass:"l-txt-gray"},[t._v("请催促客户及时还款")])]),a("i",{staticClass:"l-fs-x2 l-txt-main l-rmb"},[t._v(t._s(t._f("Currency")(t.payToday.amount)))])])]):t._e(),a("div",{staticClass:"l-repay-list"},[a("div",{staticClass:"_hd"},[a("h3",[t._v("还款计划")])]),a("div",{staticClass:"_bd"},t._l(t.info.monthlyRecord,function(i){return a("div",{key:i.id,staticClass:"_item"},[a("p",[a("span",{staticClass:"l-fr",class:t.payState[i.state].css},[t._v("\n                  "+t._s(i.stateName)),3===i.state?a("i",[t._v(t._s(i.overDueDays)+"天，罚息"+t._s(i.overdueFee))]):t._e()]),a("span",[t._v("应还金额："),a("i",{staticClass:"l-rmb l-txt-ok"},[t._v(t._s(t._f("Currency")(i.amount)))])]),a("span",{staticClass:"l-liney"}),a("span",{staticClass:"l-fs-xxs l-txt-gray l-dib"},[t._v("含手续费："),a("i",{staticClass:"l-rmb"},[t._v(t._s(i.fee))])])]),a("p",[[-1,3].includes(i.state)?a("span",{staticClass:"l-fr"},[a("i",{staticClass:"l-txt-link l-margin-l",on:{click:function(a){t.showPaySure(i.id)}}},[t._v("确认收款")]),a("i",{staticClass:"l-txt-link l-margin-l",on:{click:function(a){t.showPayAgain(i)}}},[t._v("发起扣款")])]):t._e(),a("span",{staticClass:"l-margin-r-m"},[t._v("还款日期："+t._s(i.payDate))]),0!==i.state?a("el-popover",{attrs:{placement:"bottom",width:"230",trigger:"click"},on:{show:function(a){t.getPayRecord(i.id)}}},[a("span",{attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"l-txt-blue"},[t._v("支付记录")]),t._v(" "),a("i",{staticClass:"l-fs-xs el-icon-caret-bottom l-txt-gray2"})]),a("div",{staticClass:"l-pay-record"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.payRecord.loading,expression:"payRecord.loading"}],staticClass:"l-padding l-txt-center l-txt-gray"},[a("i",{staticClass:"el-icon-loading"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.payRecord.loading&&0===t.payRecord.data.length,expression:"!payRecord.loading && payRecord.data.length === 0"}],staticClass:"l-padding l-txt-center l-txt-gray"},[t._v("暂无记录")]),t._l(t.payRecord.data,function(i){return a("div",{key:i.id,staticClass:"_item"},[a("p",{staticClass:"l-txt-gray"},[t._v("操作时间："+t._s(i.createTime))]),i.transId?a("p",[t._v("交易编号："+t._s(i.transId))]):t._e(),a("p",[t._v("交易金额："),a("i",{staticClass:"l-rmb"},[t._v(t._s(i.amount))])]),a("p",[t._v("交易状态："),a("i",{class:t.payState2[i.state].css},[t._v(t._s(t.payState2[i.state].label))])]),i.voucher?a("p",[t._v("交易凭证："),a("span",{staticClass:"l-txt-link",on:{click:function(a){t.previewImage(0,[i.voucher])}}},[t._v("点击查看")])]):t._e(),a("p",[t._v("交易备注："+t._s(i.remark))])])})],2)]):t._e()],1)])}))])]):t._e()]),a("el-dialog",{attrs:{title:t.formData.title,visible:t.formData.visible,width:"500px"},on:{"update:visible":function(i){t.$set(t.formData,"visible",i)}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入拒绝原因，如个人资料缺失，上传错误资料等"},model:{value:t.formData.reason,callback:function(i){t.$set(t.formData,"reason",i)},expression:"formData.reason"}}),a("span",{staticClass:"l-margin-r-m",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{white:""},on:{click:function(i){t.formData.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.formData.loading},on:{click:function(i){t.submit(-1)}}},[t._v(t._s(t.formData.loading?"提交中...":"确定拒绝"))])],1)],1),a("el-dialog",{attrs:{title:t.closeReason.title,visible:t.closeReason.visible,width:"500px"},on:{"update:visible":function(i){t.$set(t.closeReason,"visible",i)}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入关闭原因"},model:{value:t.closeReason.reason,callback:function(i){t.$set(t.closeReason,"reason",i)},expression:"closeReason.reason"}}),a("span",{staticClass:"l-margin-r-m",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{white:""},on:{click:function(i){t.closeReason.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.closeReason.loading},on:{click:t.submitClose}},[t._v(t._s(t.closeReason.loading?"提交中...":"确定关闭"))])],1)],1),a("el-dialog",{attrs:{title:"发起扣款",visible:t.payAgain.visible,width:"450px"},on:{"update:visible":function(i){t.$set(t.payAgain,"visible",i)}}},[a("div",{staticStyle:{margin:"-15px 0 10px"}},[a("p",[t._v("本次扣款金额："),a("i",{staticClass:"l-rmb l-txt-error"},[t._v(t._s(t.payAgain.info.amount))])]),a("p",[t._v("扣款银行卡号：")])]),a("div",{staticClass:"l-flex-hc"},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:t.payAgain.sltedCard,callback:function(i){t.$set(t.payAgain,"sltedCard",i)},expression:"payAgain.sltedCard"}},t._l(t.payAgain.cardList,function(t){return a("el-option",{key:t.id,attrs:{label:t.account,value:t.account}})})),a("el-button",{staticClass:"l-margin-l",attrs:{type:"success"},nativeOn:{click:function(i){t.payAgain.innerVisible=!0}}},[t._v("使用新卡")])],1),a("br"),a("el-dialog",{attrs:{"append-to-body":"",title:"新卡扣款",visible:t.payAgain.innerVisible,width:"450px"},on:{"update:visible":function(i){t.$set(t.payAgain,"innerVisible",i)}}},[a("el-form",{staticStyle:{margin:"0 30px 0 20px"},attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"扣款银行卡号"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入扣款银行卡号"},model:{value:t.payAgain.account,callback:function(i){t.$set(t.payAgain,"account",i)},expression:"payAgain.account"}})],1),a("el-form-item",{attrs:{label:"绑卡验证码"}},[a("div",{staticClass:"l-flex-hc"},[a("el-input",{attrs:{maxlength:"6",placeholder:"请输入绑卡验证码"},model:{value:t.payAgain.code,callback:function(i){t.$set(t.payAgain,"code",i)},expression:"payAgain.code"}}),a("el-button",{ref:"sendCodeBtn",staticClass:"l-margin-l",staticStyle:{width:"120px"},attrs:{type:"success"},on:{click:function(i){i.preventDefault(),t.sendBindCode()}}},[t._v("获取验证码")])],1)])],1),a("div",{staticClass:"l-txt-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{white:""},on:{click:function(i){t.payAgain.innerVisible=!1}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary",loading:t.payAgain.loading},on:{click:function(i){t.submitPayAgain(1)}}},[t._v(t._s(t.payAgain.loading?"扣款中...":"确定扣款"))])],1)],1),a("div",{staticClass:"l-txt-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{white:""},on:{click:function(i){t.payAgain.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.payAgain.loading},on:{click:function(i){t.submitPayAgain(0)}}},[t._v(t._s(t.payAgain.loading?"扣款中...":"确定扣款"))])],1)],1),a("el-dialog",{attrs:{title:"确认收款",visible:t.paySure.visible,width:"450px"},on:{"update:visible":function(i){t.$set(t.paySure,"visible",i)}}},[a("el-form",{staticStyle:{margin:"0 30px 0 20px"},attrs:{"label-position":"top"}},[a("el-form-item",{attrs:{label:"收款凭证："}},[a("uploader",{attrs:{"file-list":t.paySure.voucher,"sample-pic":["https://placeholdit.imgix.net/~text?txtsize=20&bg=eee&txtclr=999&txt=image&w=100&h=100"]},on:{"update:fileList":function(i){t.$set(t.paySure,"voucher",i)}}})],1),a("el-form-item",{attrs:{label:"收款备注："}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入收款备注说明"},model:{value:t.paySure.remark,callback:function(i){t.$set(t.paySure,"remark",i)},expression:"paySure.remark"}})],1)],1),a("div",{staticClass:"l-txt-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{white:""},on:{click:function(i){t.paySure.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.paySure.loading},on:{click:function(i){t.submitPaySure()}}},[t._v(t._s(t.paySure.loading?"确认中...":"确认已收款"))])],1)],1),a("image-previewer",{ref:"viewer",staticStyle:{display:"none"},attrs:{"file-list":t.images}})],1)],1):t._e()},e=[],n=a("yT7P"),l=(a("VRzm"),a("O6p1")),o=a("TtEn"),r=a("L2JU"),c={name:"hyfq-order-info",components:{ImagePreviewer:l["a"],Uploader:o["a"]},data:function(){return{stateList:{0:{label:"审核中",value:0,css:"l-alert-ok",icon:"el-icon-warning"},5:{label:"待放款",value:5,css:"l-alert-ok",icon:"el-icon-warning"},10:{label:"放款成功，待出保险",value:10,css:"l-alert-ok",icon:"el-icon-success"},20:{label:"已出保险，待还款中",value:20,css:"l-alert-warn",icon:"el-icon-warning"},30:{label:"扣款失败",value:30,css:"l-alert-error",icon:"el-icon-error"},40:{label:"已逾期",value:40,css:"l-alert-error",icon:"el-icon-error"},50:{label:"已还清",value:50,css:"l-alert-ok",icon:"el-icon-success"},"-3":{label:"已关闭",value:-3,css:"l-alert-gray"},"-2":{label:"不放款",value:-2,css:"l-alert-gray"},"-1":{label:"已拒绝",value:-1,css:"l-alert-gray"}},payState:{"-1":{label:"扣款失败",value:0,css:"l-txt-error"},0:{label:"未还款",value:5,css:"l-txt-gray"},1:{label:"已还款",value:10,css:"l-txt-ok"},2:{label:"处理中",value:20,css:"l-txt-warn"},3:{label:"已逾期",value:30,css:"l-txt-error"}},payState2:{"-2":{label:"失败",value:-2,css:"l-txt-error"},"-1":{label:"失败",value:-1,css:"l-txt-error"},0:{label:"--",value:0,css:"l-txt-gray"},1:{label:"成功",value:1,css:"l-txt-ok"},2:{label:"处理中",value:2,css:"l-txt-warn"},3:{label:"成功",value:2,css:"l-txt-warn"},4:{label:"处理中",value:2,css:"l-txt-warn"}},payRecord:{loading:!1,data:[]},images:[],formData:{title:"拒绝原因",loading:!1,visible:!1,orderId:"",state:"",reason:""},closeReason:{title:"关闭订单",loading:!1,visible:!1,reason:""},payAgain:{loading:!1,visible:!1,innerVisible:!1,cardList:[],info:{},sltedCard:"",account:"",code:""},paySure:{loading:!1,visible:!1,id:"",voucher:[],remark:""},info:null}},computed:Object(n["a"])({},Object(r["b"])(["userInfo"]),{payToday:function(){return this.info.monthlyRecord&&this.info.monthlyRecord.filter(function(t){return 1===t.isPayDate})[0]}}),methods:{sendBindCode:function(){var t=this;if(!this.payAgain.account)return this.$message.error("请输入扣款银行卡号");var i=this.$refs.sendCodeBtn.$el;i.time>=0||(i.time=60,i.timeId=0,i.oldText=i.textContent,i.setAttribute("disabled",!0),i.textContent="60s",i.timeId=setInterval(function(){--i.time>=0?i.textContent="".concat(i.time,"s"):(clearInterval(i.timeId),i.removeAttribute("disabled"),i.textContent=i.oldText)},1e3),this.$api.hyfq.sendBindCode({id:this.payAgain.info.id,account:this.payAgain.account}).then(function(){t.$message.success("绑卡验证码已发送到扣款银行卡预留手机，请提醒客户查收！")}).catch(function(){clearInterval(i.timeId),i.time=-1,i.removeAttribute("disabled"),i.textContent=i.oldText}))},previewImage:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.images=a,setTimeout(function(){t.$refs.viewer.preview(i)},50)},getPayRecord:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.payRecord.data=[],this.payRecord.loading=!0,this.$api.hyfq.getPayRecord(i).then(function(i){var a=i.data;a&&a.length>0&&(t.payRecord.data=a)}).finally(function(){t.payRecord.loading=!1})},getInfo:function(){var t=this;this.$nprogress.start(),this.$api.hyfq.getOrderInfo(this.$route.query.id).then(function(i){var a=i.data;a&&(t.info=a)}).finally(function(){t.$nprogress.done()})},submitConfirm:function(){var t=this;this.$confirm("请确认资料无误，通过审核？",{dangerouslyUseHTMLString:!0,confirmButtonText:"确认通过",cancelButtonText:"取消"}).then(function(){t.submit(5)})},submit:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,a=this.$utils.copyObj({orderId:"",reason:""},this.formData),s="通过成功，等待放款";if(-1===i){if(!a.reason)return this.$message.error("请输入拒绝原因");this.formData.visible=!1,s="拒绝成功"}a.orderId=this.info.id,a.state=i;var e=this.$loading();this.$api.hyfq.verifyOrder(a).then(function(){t.$message({type:"success",message:s,duration:1e3,onClose:function(){t.getInfo()}})}).finally(function(){e.close()})},submitClose:function(){var t=this,i=this.$loading();this.$api.hyfq.closeOrder({orderId:this.info.id,reason:this.closeReason.reason}).then(function(){t.closeReason.visible=!1,t.$message({type:"success",message:"订单关闭成功",duration:1e3,onClose:function(){t.getInfo()}})}).finally(function(){i.close()})},sureInsurance:function(){var t=this;this.$confirm("是否确定保险已出？",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var i=t.$loading();t.$api.hyfq.sureInsurance(t.info.id).then(function(){t.$message.success("操作成功"),t.getInfo()}).finally(function(){i.close()})})},showPayAgain:function(t){var i=this,a=this.$loading();this.$api.hyfq.getCardList(t.id).then(function(a){var s=a.data;i.payAgain.info=t,s?(i.payAgain.cardList=s,i.payAgain.sltedCard=s[0].account):i.payAgain.cardList=[],i.payAgain.visible=!0}).finally(function(){a.close()})},submitPayAgain:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a={type:i,id:this.payAgain.info.id};if(0===i){if(!this.payAgain.sltedCard)return this.$message.error("请选择扣款银行卡");a.account=this.payAgain.sltedCard}else{if(!this.payAgain.account)return this.$message.error("请输入扣款银行卡");if(!this.payAgain.code)return this.$message.error("请输入绑卡验证码");a.account=this.payAgain.account,a.code=this.payAgain.code}this.payAgain.loading=!0,this.$api.hyfq.payAgain(a).then(function(){t.$message.success("操作成功"),t.payAgain.visible=!1,t.payAgain.innerVisible=!1,t.getInfo()}).finally(function(){t.payAgain.loading=!1})},showPaySure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.paySure.id=t,this.paySure.visible=!0},submitPaySure:function(){var t=this;if(0===this.paySure.voucher.length)return this.$message.error("请上传收款凭证");this.paySure.loading=!0,this.$api.hyfq.payConfirm({id:this.paySure.id,voucher:this.paySure.voucher,remark:this.paySure.remark}).then(function(){t.$message.success("确认收款成功"),t.paySure.visible=!1,t.getInfo()}).finally(function(){t.paySure.loading=!1})}},mounted:function(){this.getInfo()}},u=c,d=(a("Ve9S"),a("KHd+")),f=Object(d["a"])(u,s,e,!1,null,"3a0a6f77",null);i["default"]=f.exports},INYr:function(t,i,a){"use strict";var s=a("XKFU"),e=a("CkkT")(6),n="findIndex",l=!0;n in[]&&Array(1)[n](function(){l=!1}),s(s.P+s.F*l,"Array",{findIndex:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),a("nGyu")(n)},L1aX:function(t,i,a){},PFuD:function(t,i,a){},TtEn:function(t,i,a){"use strict";var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"l-uploader"},[a("el-upload",{staticClass:"l-upload-card",attrs:{name:"image",accept:"image/*","list-type":"picture-card",multiple:"",data:t.formData,limit:t.limit,"file-list":t.files,action:t.$api.uploadURL,"on-success":t.uploadSuccess,"on-remove":t.uploadRemove,"on-preview":t.uploadPreview,"on-progress":t.uploadProgress,"on-error":t.uploadError,"on-exceed":t.uploadExceed,"before-upload":t.uploadBefore}},[t.fileNum<t.limit?a("div",{attrs:{slot:"trigger"},slot:"trigger"},[0===t.fileNum?a("div",{staticClass:"_tip-imgs",on:{click:function(t){t.stopPropagation()}}},[a("image-previewer",{attrs:{"file-list":t.images}})],1):t._e(),a("div",{staticClass:"_tip-txt"},[a("div",{staticClass:"_slot",on:{click:function(t){t.stopPropagation()}}},[t._t("default",[a("p",[t._v(t._s(t.tip))]),a("p",[t._v("支持JPG/PNG格式")])])],2),a("a",{staticClass:"_slt"},[t._v("选择文件")])])]):t._e()]),a("image-previewer",{ref:"viewer",staticStyle:{display:"none"},attrs:{"file-list":t.fileList}})],1)},e=[],n=(a("INYr"),a("f3/d"),a("iv4g")),l=(a("xfY5"),a("O6p1")),o={components:{ImagePreviewer:l["a"]},props:{fileList:{type:Array,default:function(){return[]}},samplePic:{type:Array,default:function(){return[]}},limit:{type:Number,default:50},tip:{type:String,default:"示例图"}},data:function(){return{formData:{},waiting:0,fileNum:0}},computed:{files:{get:function(){var t=this;return this.fileList.map(function(i){return{name:t.$utils.guid(),url:t.$utils.imgThumb(i,150,150),src:i,status:"success"}})},set:function(t){this.$emit("update:fileList",t&&t.length>=0?t.map(function(t){return t.src}):[])}},images:function(){return Object(n["a"])(this.samplePic)}},watch:{files:{immediate:!0,handler:function(t){this.fileNum=t.length}}},methods:{uploadSuccess:function(t,i){if(this.files.push({name:i.name,url:this.$utils.imgThumb(t.data.url,150,150),src:t.data.url,status:"success"}),--this.waiting<=0){var a=this.files.map(function(t){return t.src});this.$emit("upload-success",a),this.$emit("update:fileList",a)}},uploadBefore:function(){++this.fileNum,++this.waiting},uploadPreview:function(t){this.$refs.viewer.preview(this.files.findIndex(function(i){return i.url===t.url})||0)},uploadRemove:function(t){"success"===t.status?this.files=this.files.filter(function(i){return t.response?i.src!==t.response.data.url:i.src!==(t.src||t.url)}):--this.waiting,--this.fileNum},uploadProgress:function(t,i,a){},uploadError:function(t,i){this.$notify.error({title:"上传失败",message:"图片".concat(i.name,"上传失败")})},uploadExceed:function(){this.$message.error("最多上传"+this.limit+"张照片")}},mounted:function(){this.formData.timestamp=Date.now(),this.formData.sign=this.$api.md5(this.$utils.sign(this.formData))}},r=o,c=(a("sx7D"),a("KHd+")),u=Object(c["a"])(r,s,e,!1,null,null,null);i["a"]=u.exports},Ve9S:function(t,i,a){"use strict";var s=a("L1aX"),e=a.n(s);e.a},sx7D:function(t,i,a){"use strict";var s=a("PFuD"),e=a.n(s);e.a}}]);
//# sourceMappingURL=12.0791d51d.js.map