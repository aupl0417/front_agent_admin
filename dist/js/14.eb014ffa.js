(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{CFoE:function(t,e,a){"use strict";var i=a("tQH2"),n=a.n(i);n.a},ZAdF:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pager.total>0,expression:"pager.total > 0"}],attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":t.$api.pageSizes,"page-size":t.pager.rows,"current-page":t.pager.page,total:t.pager.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange,"update:pageSize":function(e){t.$set(t.pager,"rows",e)},"update:currentPage":function(e){t.$set(t.pager,"page",e)}}})},n=[],l=(a("xfY5"),a("pIFo"),{name:"pagination",components:{},props:{pager:{type:Object,default:function(){return{page:1,rows:10,total:0}}}},data:function(){return{}},methods:{sizeChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.$storage.local.set(this.$route.path+"-table_rows",t),this.$emit("change",1,t)},pageChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$utils.history.replace(this.$utils.url.setArgs(this.$route.fullPath,"_page",t)),this.$emit("change",t,this.pager.rows)},initPager:function(){var t=this.$storage.local.get(this.$route.path+"-table_rows"),e=Number(this.$route.query._page)||1;t&&(this.pager.rows=t),e&&(this.pager.page=e)}},mounted:function(){this.initPager()}}),o=l,s=(a("CFoE"),a("KHd+")),r=Object(s["a"])(o,i,n,!1,null,"d7519360",null);e["a"]=r.exports},tQH2:function(t,e,a){},wc5Z:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"l-h100"},[a("el-header",{staticClass:"l-padding-0 l-bg-white",attrs:{height:"auto"}},[a("div",{staticClass:"l-filter-top"},[a("div"),a("el-form",{ref:"listFilter",staticClass:"l-filter-form",attrs:{inline:"",model:t.list.filter,rules:t.list.rules},nativeOn:{submit:function(t){t.preventDefault()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}}},[a("el-form-item",{staticStyle:{width:"420px"},attrs:{label:"注册时间",prop:"dateRange"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"到","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd","picker-options":t.$config.dateOptions},on:{change:t.dateChange},model:{value:t.list.dateRange,callback:function(e){t.$set(t.list,"dateRange",e)},expression:"list.dateRange"}})],1),a("el-form-item",{staticClass:"l-margin-r"},[a("el-input",{staticStyle:{width:"320px"},attrs:{placeholder:"请输入门店名称/手机号码"},model:{value:t.list.filter.keywords,callback:function(e){t.$set(t.list.filter,"keywords",e)},expression:"list.filter.keywords"}})],1),a("el-form-item",{staticClass:"l-margin-r"},[a("el-button",{attrs:{type:"success"},nativeOn:{click:function(e){t.search()}}},[t._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"warning"},nativeOn:{click:function(e){t.showDialogInfo("new")}}},[t._v("新增渠道商")])],1)],1)],1)]),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.list.loading,expression:"list.loading"}],staticClass:"l-table-01",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中","highlight-current-row":"",data:t.list.data}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60"}}),a("el-table-column",{attrs:{prop:"agentName",label:"渠道商名称",width:"200"}}),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"联系人",width:"120"}}),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号码",width:"120"}}),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"注册时间",width:"170"}}),a("el-table-column",{attrs:{"min-width":"1"}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:e.row.doing,expression:"scope.row.doing"}],staticClass:"l-txt-gray"},[a("i",{staticClass:"el-icon-loading"}),t._v(" 操作中")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.row.doing,expression:"!scope.row.doing"}]},[a("el-button",{attrs:{white:"",size:"mini"},nativeOn:{click:function(a){t.showDialogInfo("edit",e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){t.del(e.row)}}},[t._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.closeDialogInfo,title:t.dialogInfo.title,visible:t.dialogInfo.visible,width:"400px"},on:{"update:visible":function(e){t.$set(t.dialogInfo,"visible",e)}}},[a("el-form",{ref:"infoForm",staticClass:"l-dialog-form l-margin-r",attrs:{"label-width":"100px",model:t.dialogInfo.data,rules:t.dialogInfo.rules},nativeOn:{submit:function(t){t.preventDefault()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitDialogInfo(e):null}}},[a("el-form-item",{attrs:{label:"渠道商名称",prop:"agentName"}},[a("el-input",{attrs:{placeholder:"请输入渠道商公司名或个人姓名",maxlength:50},model:{value:t.dialogInfo.data.agentName,callback:function(e){t.$set(t.dialogInfo.data,"agentName",e)},expression:"dialogInfo.data.agentName"}})],1),a("el-form-item",{attrs:{label:"联系人",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入联系人姓名",maxlength:50},model:{value:t.dialogInfo.data.userName,callback:function(e){t.$set(t.dialogInfo.data,"userName",e)},expression:"dialogInfo.data.userName"}})],1),a("el-form-item",{attrs:{label:"登录账号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:11},model:{value:t.dialogInfo.data.phone,callback:function(e){t.$set(t.dialogInfo.data,"phone",e)},expression:"dialogInfo.data.phone"}})],1)],1),a("span",{staticClass:"l-margin-r-m",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{white:""},on:{click:function(e){t.closeDialogInfo()}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.dialogInfo.loading},on:{click:t.submitDialogInfo}},[t._v("确定提交")])],1)],1)],1),a("el-footer",{staticClass:"l-flex-vhc",attrs:{height:"40px"}},[a("pagination",{attrs:{pager:t.list.pager},on:{change:t.getList,"update:pager":function(e){t.$set(t.list,"pager",e)}}})],1)],1)},n=[],l=(a("91GP"),a("OG14"),a("VRzm"),a("ZAdF")),o={name:"agent-list",components:{pagination:l["a"]},data:function(){return{list:{dateRange:[],filter:{startDate:"",endDate:"",keywords:""},rules:{startDate:[],endDate:[],keywords:[]},pager:{page:1,rows:10,total:0},loading:!1,data:[]},dialogInfo:{type:"new",title:"新增渠道商",visible:!1,loading:!1,rules:{agentName:[{required:!0,message:"必选项",trigger:"blur"}],userName:[{required:!0,message:"必选项",trigger:"blur"}],phone:[{required:!0,message:"必填项",trigger:"blur"},{pattern:/^1\d{10}$/,message:"请输入正确的手机号码",trigger:"blur"}]},data:{id:null,agentName:"",userName:"",phone:""}}}},methods:{dateChange:function(t){t&&t.length>0?(this.list.filter.startDate=t[0],this.list.filter.endDate=t[1]||""):(this.list.filter.startDate="",this.list.filter.endDate=""),this.search()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.list.pager.page,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list.pager.rows;this.list.loading=!0,this.$api.agent.getList(this.list.filter,e,a).then(function(i){var n=i.data;t.$utils.copyObj(t.list.pager,n,{page:e,rows:a}),t.list.data=n.list}).finally(function(){t.list.loading=!1})},search:function(){this.getList(1)},clear:function(){this.$refs.listFilter&&this.$refs.listFilter.resetFields(),this.getList(1)},showDialogInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new",e=arguments.length>1?arguments[1]:void 0;this.dialogInfo.type=t,"edit"===t?(this.dialogInfo.title="编辑渠道商信息",this.$utils.copyObj(this.dialogInfo.data,e)):(this.dialogInfo.title="新增渠道商信息",this.$utils.copyObj(this.dialogInfo.data,"")),this.dialogInfo.visible=!0},closeDialogInfo:function(t){t?t():this.dialogInfo.visible=!1,this.resetDialogInfo()},resetDialogInfo:function(){this.$refs.infoForm&&this.$refs.infoForm.resetFields(),this.$utils.copyObj(this.dialogInfo.data,"")},submitDialogInfo:function(){var t=this;this.$refs.infoForm.validate(function(e){if(e){var a=Object.assign({},t.dialogInfo.data),i="edit"==t.dialogInfo.type?t.$api.agent.edit(a):t.$api.agent.add(a);t.dialogInfo.loading=!0,i.then(function(){t.$message.success(("edit"===t.dialogInfo.type?"修改":"新增")+"成功"),t.closeDialogInfo(),t.getList()}).finally(function(){t.dialogInfo.loading=!1})}else t.$message.error("请完善表单信息")})},del:function(t){var e=this;this.$confirm("是否确定删除该渠道商？").then(function(){t.doing=!0,e.$api.role.del(t.id).then(function(){e.$message.success("删除成功"),e.getList()}).finally(function(){t.doing=!1})})}},mounted:function(){this.getList()}},s=o,r=a("KHd+"),g=Object(r["a"])(s,i,n,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=14.eb014ffa.js.map