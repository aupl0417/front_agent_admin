(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{INYr:function(t,e,i){"use strict";var n=i("XKFU"),a=i("CkkT")(6),o="findIndex",l=!0;o in[]&&Array(1)[o](function(){l=!1}),n(n.P+n.F*l,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("nGyu")(o)},SI08:function(t,e,i){"use strict";var n=i("Vjp2"),a=i.n(n);a.a},Vjp2:function(t,e,i){},frVx:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{staticClass:"l-h100"},[i("el-header",{staticClass:"l-padding-0 l-bg-white",attrs:{height:"auto"}},[i("div",{staticClass:"l-filter-top"},[i("ul",{staticClass:"l-tab-tit"},[i("li",{staticClass:"_active2"},[t._v("菜单列表")]),i("li",{on:{click:function(e){t.$router.replace("/role/list")}}},[t._v("角色列表")])])])]),i("el-main",[i("div",{staticClass:"l-menu-box l-bg-white"},[i("div",{staticClass:"l-flex-hc _tit"},[i("b",[t._v("菜单名称")]),i("div",{staticClass:"l-margin-l"},[i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),i("div",{staticClass:"l-rest l-txt-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"l-txt-warn"},[i("i",{staticClass:"el-icon-loading"}),t._v(" 加载中...")])]),i("el-button",{attrs:{disabled:t.loading,type:"text"},on:{click:function(e){t.showDialogInfo("new")}}},[t._v("添加一级菜单")])],1),t.menuList?i("el-tree",{ref:"menuTree",staticClass:"l-menu-list",attrs:{"highlight-current":"","node-key":"id","default-expanded-keys":[1],data:t.menuList,props:t.menuProps,"render-content":t.renderContent,"filter-node-method":t.filterNode}}):t._e(),i("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.closeDialogInfo,title:t.dialogInfo.title,visible:t.dialogInfo.visible,width:"480px"},on:{"update:visible":function(e){t.$set(t.dialogInfo,"visible",e)}}},[i("el-form",{ref:"infoForm",staticStyle:{width:"432px"},attrs:{"label-width":"90px",model:t.dialogInfo.data,rules:t.dialogInfo.rules},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitDialogInfo(e):null}}},[i("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[i("el-input",{attrs:{maxlength:50},model:{value:t.dialogInfo.data.name,callback:function(e){t.$set(t.dialogInfo.data,"name",e)},expression:"dialogInfo.data.name"}})],1),i("el-form-item",{attrs:{label:"菜单URL",prop:"src"}},[i("el-input",{attrs:{maxlength:50},model:{value:t.dialogInfo.data.src,callback:function(e){t.$set(t.dialogInfo.data,"src",e)},expression:"dialogInfo.data.src"}})],1),i("el-form-item",{attrs:{label:"菜单Code",prop:"code"}},[i("el-input",{attrs:{maxlength:50},model:{value:t.dialogInfo.data.code,callback:function(e){t.$set(t.dialogInfo.data,"code",e)},expression:"dialogInfo.data.code"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{maxlength:50},model:{value:t.dialogInfo.data.remark,callback:function(e){t.$set(t.dialogInfo.data,"remark",e)},expression:"dialogInfo.data.remark"}})],1)],1),i("span",{staticClass:"l-margin-r-m",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.closeDialogInfo()}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",loading:t.dialogInfo.loading},on:{click:t.submitDialogInfo}},[t._v("确定提交")])],1)],1)],1)])],1)},a=[];i("INYr"),i("91GP"),i("f3/d"),i("VRzm");function o(t){return t.stopPropagation(),!1}var l={name:"menu-list",data:function(){return{filterText:"",loading:!1,menuList:[],menuProps:{children:"children",label:"name"},dialogInfo:{type:"new",title:"新增菜单",visible:!1,loading:!1,rules:{name:[{required:!0,message:"必填项",trigger:"blur"}]},data:{parentId:0,id:"",name:"",src:"",code:"",remark:""}}}},watch:{filterText:function(t){this.$refs.menuTree.filter(t)}},methods:{filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},getList:function(){var t=this;this.loading=!0,this.$api.menu.getList().then(function(e){var i=e.data;t.menuList=i||[]}).finally(function(){t.loading=!1})},showDialogInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new",e=arguments.length>1?arguments[1]:void 0;this.dialogInfo.type=t,"edit"===t?(this.dialogInfo.title="修改菜单",this.dialogInfo.currentNodeData=e,this.$utils.copyObj(this.dialogInfo.data,e)):(this.dialogInfo.title="新增菜单",this.resetDialogInfo(),this.dialogInfo.data.parentId=e?e.id:0),this.dialogInfo.visible=!0},closeDialogInfo:function(t){t?t():this.dialogInfo.visible=!1,this.resetDialogInfo()},resetDialogInfo:function(){this.$refs.infoForm&&this.$refs.infoForm.resetFields(),this.$utils.copyObj(this.dialogInfo.data,"")},submitDialogInfo:function(){var t=this;this.$refs.infoForm.validate(function(e){if(e){t.dialogInfo.loading=!0;var i="edit"==t.dialogInfo.type?t.$api.menu.edit(t.dialogInfo.data):t.$api.menu.add(t.dialogInfo.data);i.then(function(e,i){var n=e.data;if("edit"==t.dialogInfo.type)i="修改菜单成功",t.$utils.copyObj(t.dialogInfo.currentNodeData,t.dialogInfo.data),t.$refs.menuTree.setCurrentKey(t.dialogInfo.data.id);else{i="新增菜单成功";var a=Object.assign({},t.dialogInfo.data,{id:n.id,children:[]});t.menuList.unshift(a),t.$refs.menuTree.setCurrentKey(a.id)}t.$message.success(i),t.closeDialogInfo()}).finally(function(){t.dialogInfo.loading=!1})}})},deleteInfo:function(t,e){var i=this;this.$confirm("是否确定删除该菜单？").then(function(){i.$api.menu.del(e.id).then(function(){i.$message.success("删除菜单成功");var n=t.parent,a=n.data.children||n.data,o=a.findIndex(function(t){return t.id===e.id});a.splice(o,1)})})},renderContent:function(t,e){var i=this,n=e.node,a=e.data;e.store;return t("div",{style:"flex:1;",class:"l-flex-hc"},[t("span",{class:"l-rest"},[t("span",{attrs:{id:a.id}},[a.name])]),t("span",{class:"l-padding-r",on:{click:o}},[t("el-button",{class:"l-txt-error",attrs:{type:"text"},on:{click:function(){return i.deleteInfo(n,a)}}},["删除"]),t("el-button",{class:"l-txt-link",attrs:{type:"text"},on:{click:function(){return i.showDialogInfo("edit",a)}}},["编辑"]),t("el-button",{class:"l-txt-link",attrs:{type:"text"},on:{click:function(){return i.showDialogInfo("new",a)}}},["添加子菜单"])])])}},mounted:function(){this.getList()}},s=l,r=(i("SI08"),i("KHd+")),d=Object(r["a"])(s,n,a,!1,null,"7ef24984",null);e["default"]=d.exports}}]);
//# sourceMappingURL=9.d27de781.js.map